{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { authActions } from \"../store/authSlice\";\nimport { getToken } from \"../service/storageService\";\nconst useAutoLogin = () => {\n  _s();\n  const dispatch = useDispatch();\n  return async (skipTokenTest = false) => {\n    try {\n      const token = getToken();\n      console.log(\"token!!\", token);\n      if (!token) return;\n      const dataFromToken = jwtDecode(token);\n      if (skipTokenTest) await axios.get(`/users/${dataFromToken._id}`);\n      dispatch(authActions.login(dataFromToken));\n    } catch (err) {\n      console.log(\"err from auto login\", err);\n      localStorage.clear();\n    }\n  };\n};\n_s(useAutoLogin, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\nexport default useAutoLogin;","map":{"version":3,"names":["axios","jwtDecode","useDispatch","authActions","getToken","useAutoLogin","_s","dispatch","skipTokenTest","token","console","log","dataFromToken","get","_id","login","err","localStorage","clear"],"sources":["/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger test/hackeru-react-shoptest/src/hooks/useAutoLogin.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { authActions } from \"../store/authSlice\";\nimport { getToken } from \"../service/storageService\";\n\nconst useAutoLogin = () => {\n  const dispatch = useDispatch();\n  return async (skipTokenTest = false) => {\n    try {\n      const token = getToken();\n      console.log(\"token!!\", token);\n      if (!token) return;\n      const dataFromToken = jwtDecode(token);\n      if (skipTokenTest) await axios.get(`/users/${dataFromToken._id}`);\n      dispatch(authActions.login(dataFromToken));\n    } catch (err) {\n      console.log(\"err from auto login\", err);\n      localStorage.clear();\n    }\n  };\n};\n\nexport default useAutoLogin;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,WAAW,QAAQ,oBAAoB;AAChD,SAASC,QAAQ,QAAQ,2BAA2B;AAEpD,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,OAAO,OAAOM,aAAa,GAAG,KAAK,KAAK;IACtC,IAAI;MACF,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;MACxBM,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;MAC7B,IAAI,CAACA,KAAK,EAAE;MACZ,MAAMG,aAAa,GAAGX,SAAS,CAACQ,KAAK,CAAC;MACtC,IAAID,aAAa,EAAE,MAAMR,KAAK,CAACa,GAAG,CAAE,UAASD,aAAa,CAACE,GAAI,EAAC,CAAC;MACjEP,QAAQ,CAACJ,WAAW,CAACY,KAAK,CAACH,aAAa,CAAC,CAAC;IAC5C,CAAC,CAAC,OAAOI,GAAG,EAAE;MACZN,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEK,GAAG,CAAC;MACvCC,YAAY,CAACC,KAAK,CAAC,CAAC;IACtB;EACF,CAAC;AACH,CAAC;AAACZ,EAAA,CAfID,YAAY;EAAA,QACCH,WAAW;AAAA;AAgB9B,eAAeG,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}