{"ast":null,"code":"import _defineProperty from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditStatusPage=function EditStatusPage(){var _ref2;var _useParams=useParams(),userId=_useParams.userId;var authenticatedUser=useSelector(function(state){return state.authSlice.user;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newPhone=_useState6[0],setNewPhone=_useState6[1];var _useState7=useState({country:\"\",city:\"\",street:\"\",houseNumber:\"\"}),_useState8=_slicedToArray(_useState7,2),newAddress=_useState8[0],setNewAddress=_useState8[1];useEffect(function(){var _ref;var fetchUser=function fetchUser(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"users/\".concat(userId));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setUser(data);setNewName(data.name.first);setNewPhone(data.phone);setNewAddress({country:data.address.country,city:data.address.city,street:data.address.street,houseNumber:data.address.houseNumber});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"Error fetching user:\",_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}))).apply(this,arguments);};fetchUser();},[userId]);var handleUpdateUser=function handleUpdateUser(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"users/\".concat(userId),{name:{first:newName,middle:user.name.middle,last:user.name.last},phone:newPhone,address:_objectSpread({},newAddress),image:{url:user.image.url,alt:user.image.alt}});case 3:console.log(\"User ID \".concat(userId,\" details updated\"));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(\"Error updating user:\",_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}))).apply(this,arguments);};var handleNameChange=function handleNameChange(e){setNewName(e.target.value);};var handlePhoneChange=function handlePhoneChange(e){setNewPhone(e.target.value);};var handleAddressChange=function handleAddressChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setNewAddress(function(prevAddress){return _objectSpread(_objectSpread({},prevAddress),{},_defineProperty({},name,value));});};if(!user){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}// Check if the authenticated user matches the user being edited\nvar isCurrentUser=authenticatedUser&&authenticatedUser._id===user._id;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit User Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"User ID: \",user._id]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newName,onChange:handleNameChange,disabled:!isCurrentUser}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPhone,onChange:handlePhoneChange,disabled:!isCurrentUser}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"country\",value:newAddress.country,onChange:handleAddressChange,disabled:!isCurrentUser}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:newAddress.city,onChange:handleAddressChange,disabled:!isCurrentUser}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"street\",value:newAddress.street,onChange:handleAddressChange,disabled:!isCurrentUser}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"houseNumber\",value:newAddress.houseNumber,onChange:handleAddressChange,disabled:!isCurrentUser}),isCurrentUser&&/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateUser,children:\"Update User\"})]});};export default EditStatusPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","useSelector","jsx","_jsx","jsxs","_jsxs","EditStatusPage","_ref2","_useParams","userId","authenticatedUser","state","authSlice","user","_useState","_useState2","_slicedToArray","setUser","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newPhone","setNewPhone","_useState7","country","city","street","houseNumber","_useState8","newAddress","setNewAddress","_ref","fetchUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","name","first","phone","address","t0","console","log","stop","apply","arguments","handleUpdateUser","_callee2","_callee2$","_context2","put","middle","last","_objectSpread","image","url","alt","handleNameChange","e","target","value","handlePhoneChange","handleAddressChange","_e$target","prevAddress","_defineProperty","children","isCurrentUser","_id","type","onChange","disabled","onClick"],"sources":["/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/src/pages/Sandbox/EditStatusPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\n\nconst EditStatusPage = () => {\n  const { userId } = useParams();\n  const authenticatedUser = useSelector((state) => state.authSlice.user);\n  const [user, setUser] = useState(null);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [newAddress, setNewAddress] = useState({\n    country: \"\",\n    city: \"\",\n    street: \"\",\n    houseNumber: \"\",\n  });\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const { data } = await axios.get(`users/${userId}`);\n        setUser(data);\n        setNewName(data.name.first);\n        setNewPhone(data.phone);\n        setNewAddress({\n          country: data.address.country,\n          city: data.address.city,\n          street: data.address.street,\n          houseNumber: data.address.houseNumber,\n        });\n      } catch (error) {\n        console.log(\"Error fetching user:\", error);\n      }\n    };\n    fetchUser();\n  }, [userId]);\n\n  const handleUpdateUser = async () => {\n    try {\n      await axios.put(`users/${userId}`, {\n        name: { first: newName, middle: user.name.middle, last: user.name.last },\n        phone: newPhone,\n        address: { ...newAddress },\n        image: { url: user.image.url, alt: user.image.alt },\n      });\n      console.log(`User ID ${userId} details updated`);\n    } catch (error) {\n      console.log(\"Error updating user:\", error);\n    }\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handlePhoneChange = (e) => {\n    setNewPhone(e.target.value);\n  };\n\n  const handleAddressChange = (e) => {\n    const { name, value } = e.target;\n    setNewAddress((prevAddress) => ({\n      ...prevAddress,\n      [name]: value,\n    }));\n  };\n\n  if (!user) {\n    return <p>Loading...</p>;\n  }\n\n  // Check if the authenticated user matches the user being edited\n  const isCurrentUser = authenticatedUser && authenticatedUser._id === user._id;\n\n  return (\n    <div>\n      <h1>Edit User Details</h1>\n      <p>User ID: {user._id}</p>\n      <input type=\"text\" value={newName} onChange={handleNameChange} disabled={!isCurrentUser} />\n      <input type=\"text\" value={newPhone} onChange={handlePhoneChange} disabled={!isCurrentUser} />\n      <input\n        type=\"text\"\n        name=\"country\"\n        value={newAddress.country}\n        onChange={handleAddressChange}\n        disabled={!isCurrentUser}\n      />\n      <input\n        type=\"text\"\n        name=\"city\"\n        value={newAddress.city}\n        onChange={handleAddressChange}\n        disabled={!isCurrentUser}\n      />\n      <input\n        type=\"text\"\n        name=\"street\"\n        value={newAddress.street}\n        onChange={handleAddressChange}\n        disabled={!isCurrentUser}\n      />\n      <input\n        type=\"text\"\n        name=\"houseNumber\"\n        value={newAddress.houseNumber}\n        onChange={handleAddressChange}\n        disabled={!isCurrentUser}\n      />\n      {isCurrentUser && <button onClick={handleUpdateUser}>Update User</button>}\n    </div>\n  );\n};\n\nexport default EditStatusPage;"],"mappings":"67BAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,KAAAC,KAAA,CAC3B,IAAAC,UAAA,CAAmBT,SAAS,CAAC,CAAC,CAAtBU,MAAM,CAAAD,UAAA,CAANC,MAAM,CACd,GAAM,CAAAC,iBAAiB,CAAGT,WAAW,CAAC,SAACU,KAAK,QAAK,CAAAA,KAAK,CAACC,SAAS,CAACC,IAAI,GAAC,CACtE,IAAAC,SAAA,CAAwBjB,QAAQ,CAAC,IAAI,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BD,IAAI,CAAAE,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAA8BrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAgCzB,QAAQ,CAAC,EAAE,CAAC,CAAA0B,UAAA,CAAAP,cAAA,CAAAM,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAoC7B,QAAQ,CAAC,CAC3C8B,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,WAAW,CAAE,EACf,CAAC,CAAC,CAAAC,UAAA,CAAAf,cAAA,CAAAU,UAAA,IALKM,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAOhCjC,SAAS,CAAC,UAAM,KAAAoC,IAAA,CACd,GAAM,CAAAC,SAAS,SAAT,CAAAA,SAASA,CAAA,SAAAD,IAAA,CAAAA,IAAA,EAAAE,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,gBAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAA9C,KAAK,CAAC+C,GAAG,UAAAC,MAAA,CAAUvC,MAAM,CAAE,CAAC,QAAA+B,gBAAA,CAAAI,QAAA,CAAAK,IAAA,CAA3CR,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CACZxB,OAAO,CAACwB,IAAI,CAAC,CACbpB,UAAU,CAACoB,IAAI,CAACS,IAAI,CAACC,KAAK,CAAC,CAC3B1B,WAAW,CAACgB,IAAI,CAACW,KAAK,CAAC,CACvBnB,aAAa,CAAC,CACZN,OAAO,CAAEc,IAAI,CAACY,OAAO,CAAC1B,OAAO,CAC7BC,IAAI,CAAEa,IAAI,CAACY,OAAO,CAACzB,IAAI,CACvBC,MAAM,CAAEY,IAAI,CAACY,OAAO,CAACxB,MAAM,CAC3BC,WAAW,CAAEW,IAAI,CAACY,OAAO,CAACvB,WAC5B,CAAC,CAAC,CAACc,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAEHW,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAAZ,QAAA,CAAAU,EAAO,CAAC,CAAC,yBAAAV,QAAA,CAAAa,IAAA,MAAAlB,OAAA,iBAE9C,IAAAmB,KAAA,MAAAC,SAAA,IACDxB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAAC1B,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAmD,gBAAgB,SAAhB,CAAAA,gBAAgBA,CAAA,SAAArD,KAAA,CAAAA,KAAA,EAAA6B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAuB,SAAA,SAAAxB,mBAAA,GAAAK,IAAA,UAAAoB,UAAAC,SAAA,iBAAAA,SAAA,CAAAlB,IAAA,CAAAkB,SAAA,CAAAjB,IAAA,SAAAiB,SAAA,CAAAlB,IAAA,GAAAkB,SAAA,CAAAjB,IAAA,SAEf,CAAA9C,KAAK,CAACgE,GAAG,UAAAhB,MAAA,CAAUvC,MAAM,EAAI,CACjCyC,IAAI,CAAE,CAAEC,KAAK,CAAE/B,OAAO,CAAE6C,MAAM,CAAEpD,IAAI,CAACqC,IAAI,CAACe,MAAM,CAAEC,IAAI,CAAErD,IAAI,CAACqC,IAAI,CAACgB,IAAK,CAAC,CACxEd,KAAK,CAAE5B,QAAQ,CACf6B,OAAO,CAAAc,aAAA,IAAOnC,UAAU,CAAE,CAC1BoC,KAAK,CAAE,CAAEC,GAAG,CAAExD,IAAI,CAACuD,KAAK,CAACC,GAAG,CAAEC,GAAG,CAAEzD,IAAI,CAACuD,KAAK,CAACE,GAAI,CACpD,CAAC,CAAC,QACFf,OAAO,CAACC,GAAG,YAAAR,MAAA,CAAYvC,MAAM,oBAAkB,CAAC,CAACsD,SAAA,CAAAjB,IAAA,gBAAAiB,SAAA,CAAAlB,IAAA,GAAAkB,SAAA,CAAAT,EAAA,CAAAS,SAAA,aAEjDR,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAAO,SAAA,CAAAT,EAAO,CAAC,CAAC,wBAAAS,SAAA,CAAAN,IAAA,MAAAI,QAAA,gBAE9C,IAAAH,KAAA,MAAAC,SAAA,IAED,GAAM,CAAAY,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,CAAC,CAAK,CAC9BnD,UAAU,CAACmD,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC5B,CAAC,CAED,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIH,CAAC,CAAK,CAC/B/C,WAAW,CAAC+C,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAC,CAED,GAAM,CAAAE,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIJ,CAAC,CAAK,CACjC,IAAAK,SAAA,CAAwBL,CAAC,CAACC,MAAM,CAAxBvB,IAAI,CAAA2B,SAAA,CAAJ3B,IAAI,CAAEwB,KAAK,CAAAG,SAAA,CAALH,KAAK,CACnBzC,aAAa,CAAC,SAAC6C,WAAW,SAAAX,aAAA,CAAAA,aAAA,IACrBW,WAAW,KAAAC,eAAA,IACb7B,IAAI,CAAGwB,KAAK,IACb,CAAC,CACL,CAAC,CAED,GAAI,CAAC7D,IAAI,CAAE,CACT,mBAAOV,IAAA,MAAA6E,QAAA,CAAG,YAAU,CAAG,CAAC,CAC1B,CAEA;AACA,GAAM,CAAAC,aAAa,CAAGvE,iBAAiB,EAAIA,iBAAiB,CAACwE,GAAG,GAAKrE,IAAI,CAACqE,GAAG,CAE7E,mBACE7E,KAAA,QAAA2E,QAAA,eACE7E,IAAA,OAAA6E,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1B3E,KAAA,MAAA2E,QAAA,EAAG,WAAS,CAACnE,IAAI,CAACqE,GAAG,EAAI,CAAC,cAC1B/E,IAAA,UAAOgF,IAAI,CAAC,MAAM,CAACT,KAAK,CAAEtD,OAAQ,CAACgE,QAAQ,CAAEb,gBAAiB,CAACc,QAAQ,CAAE,CAACJ,aAAc,CAAE,CAAC,cAC3F9E,IAAA,UAAOgF,IAAI,CAAC,MAAM,CAACT,KAAK,CAAElD,QAAS,CAAC4D,QAAQ,CAAET,iBAAkB,CAACU,QAAQ,CAAE,CAACJ,aAAc,CAAE,CAAC,cAC7F9E,IAAA,UACEgF,IAAI,CAAC,MAAM,CACXjC,IAAI,CAAC,SAAS,CACdwB,KAAK,CAAE1C,UAAU,CAACL,OAAQ,CAC1ByD,QAAQ,CAAER,mBAAoB,CAC9BS,QAAQ,CAAE,CAACJ,aAAc,CAC1B,CAAC,cACF9E,IAAA,UACEgF,IAAI,CAAC,MAAM,CACXjC,IAAI,CAAC,MAAM,CACXwB,KAAK,CAAE1C,UAAU,CAACJ,IAAK,CACvBwD,QAAQ,CAAER,mBAAoB,CAC9BS,QAAQ,CAAE,CAACJ,aAAc,CAC1B,CAAC,cACF9E,IAAA,UACEgF,IAAI,CAAC,MAAM,CACXjC,IAAI,CAAC,QAAQ,CACbwB,KAAK,CAAE1C,UAAU,CAACH,MAAO,CACzBuD,QAAQ,CAAER,mBAAoB,CAC9BS,QAAQ,CAAE,CAACJ,aAAc,CAC1B,CAAC,cACF9E,IAAA,UACEgF,IAAI,CAAC,MAAM,CACXjC,IAAI,CAAC,aAAa,CAClBwB,KAAK,CAAE1C,UAAU,CAACF,WAAY,CAC9BsD,QAAQ,CAAER,mBAAoB,CAC9BS,QAAQ,CAAE,CAACJ,aAAc,CAC1B,CAAC,CACDA,aAAa,eAAI9E,IAAA,WAAQmF,OAAO,CAAE1B,gBAAiB,CAAAoB,QAAA,CAAC,aAAW,CAAQ,CAAC,EACtE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1E,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}