{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import CardComponent from\"../../components/CardComponent\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{Container,Grid,Typography,Divider}from\"@mui/material\";import Pagination from\"@mui/material/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FavoriteCardPage=function FavoriteCardPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),likedCards=_useState2[0],setLikedCards=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var userData=useSelector(function(bigPie){return bigPie.authSlice.userData;});var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var itemsPerPage=12;useEffect(function(){var _ref;var fetchLikedCards=function fetchLikedCards(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userId,dataFromServer,cards;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);userId=userData._id;_context.next=5;return axios.get(\"https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards\");case 5:dataFromServer=_context.sent;cards=dataFromServer.data.filter(function(card){return card.likes.includes(userId);});setLikedCards(cards);setLoading(false);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setError(\"Error fetching liked card IDs\");setLoading(false);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}))).apply(this,arguments);};fetchLikedCards();},[userData]);var handleDeleteCard=function handleDeleteCard(_id){console.log(\"_id to delete (FavoriteCardPage)\",_id);axios.delete(\"https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards/\".concat(_id)).then(function(response){console.log(\"Card deleted successfully:\",response.data);setLikedCards(function(likedCardsCopy){return likedCardsCopy.filter(function(card){return card._id!==_id;});});}).catch(function(error){console.error(\"Error deleting card:\",error);});};var handleLikeRemove=function handleLikeRemove(_id){var updatedLikedCards=likedCards.filter(function(card){return card._id!==_id;});setLikedCards(updatedLikedCards);};var handlePageChange=function handlePageChange(event,page){setCurrentPage(page);};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Typography,{sx:{fontFamily:\"serif\",textAlign:\"center\",p:5},variant:\"h1\",children:[\"FAVORITE\",/*#__PURE__*/_jsx(Divider,{sx:{mt:4,width:750,mx:\"auto\"}})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:likedCards.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage).map(function(card){return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,lg:3,children:/*#__PURE__*/_jsx(CardComponent,{_id:card._id,title:card.title,subTitle:card.subtitle,phone:card.phone,address:\"\".concat(card.address.city,\", \").concat(card.address.street,\" \").concat(card.address.houseNumber),img:card.image&&card.image.url,alt:card.image&&card.image.alt,like:true,onToggleFavorite:function onToggleFavorite(){return handleLikeRemove(card._id);},onDeleteCard:function onDeleteCard(){return handleDeleteCard(card._id);}})},card._id);})}),/*#__PURE__*/_jsx(Pagination,{count:Math.ceil(likedCards.length/itemsPerPage),page:currentPage,onChange:handlePageChange,color:\"primary\",style:{display:\"flex\",justifyContent:\"center\",alignItems:\"flex-end\",marginTop:\"20px\",marginBottom:\"20px\"}})]});};export default FavoriteCardPage;","map":{"version":3,"names":["React","useEffect","useState","CardComponent","axios","useSelector","Container","Grid","Typography","Divider","Pagination","jsx","_jsx","jsxs","_jsxs","FavoriteCardPage","_useState","_useState2","_slicedToArray","likedCards","setLikedCards","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","userData","bigPie","authSlice","_useState7","_useState8","currentPage","setCurrentPage","itemsPerPage","_ref","fetchLikedCards","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userId","dataFromServer","cards","wrap","_callee$","_context","prev","next","_id","get","sent","data","filter","card","likes","includes","t0","stop","apply","arguments","handleDeleteCard","console","log","delete","concat","then","response","likedCardsCopy","catch","handleLikeRemove","updatedLikedCards","handlePageChange","event","page","children","sx","fontFamily","textAlign","p","variant","mt","width","mx","container","spacing","slice","map","item","xs","sm","md","lg","title","subTitle","subtitle","phone","address","city","street","houseNumber","img","image","url","alt","like","onToggleFavorite","onDeleteCard","count","Math","ceil","length","onChange","color","style","display","justifyContent","alignItems","marginTop","marginBottom"],"sources":["/Users/yannihome/Documents/School/HackerU/Projects/HackeruProject-react-YanivZinger/hackeru-react-shop/src/pages/FavoriteCardPage/FavoriteCardPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CardComponent from \"../../components/CardComponent\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { Container, Grid, Typography, Divider } from \"@mui/material\";\nimport Pagination from \"@mui/material/Pagination\";\n\nconst FavoriteCardPage = () => {\n  const [likedCards, setLikedCards] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const userData = useSelector((bigPie) => bigPie.authSlice.userData);\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 12;\n\n  useEffect(() => {\n    const fetchLikedCards = async () => {\n      try {\n        setLoading(true);\n        const userId = userData._id;\n        const dataFromServer = await axios.get(\n          \"https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards\"\n        );\n        const cards = dataFromServer.data.filter((card) =>\n          card.likes.includes(userId)\n        );\n\n        setLikedCards(cards);\n        setLoading(false);\n      } catch (error) {\n        setError(\"Error fetching liked card IDs\");\n        setLoading(false);\n      }\n    };\n\n    fetchLikedCards();\n  }, [userData]);\n\n  const handleDeleteCard = (_id) => {\n    console.log(\"_id to delete (FavoriteCardPage)\", _id);\n\n    axios\n      .delete(\n        `https://monkfish-app-z9uza.ondigitalocean.app/bcard2/cards/${_id}`\n      )\n      .then((response) => {\n        console.log(\"Card deleted successfully:\", response.data);\n\n        setLikedCards((likedCardsCopy) =>\n          likedCardsCopy.filter((card) => card._id !== _id)\n        );\n      })\n      .catch((error) => {\n        console.error(\"Error deleting card:\", error);\n      });\n  };\n\n  const handleLikeRemove = (_id) => {\n    const updatedLikedCards = likedCards.filter((card) => card._id !== _id);\n    setLikedCards(updatedLikedCards);\n  };\n\n  const handlePageChange = (event, page) => {\n    setCurrentPage(page);\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  return (\n    <Container>\n      <Typography\n        sx={{ fontFamily: \"serif\", textAlign: \"center\", p: 5 }}\n        variant=\"h1\"\n      >\n        FAVORITE\n        <Divider sx={{ mt: 4, width: 750, mx: \"auto\" }} />\n      </Typography>\n      <Grid container spacing={2}>\n        {likedCards\n          .slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage)\n          .map((card) => (\n            <Grid item key={card._id} xs={12} sm={6} md={4} lg={3}>\n              <CardComponent\n                _id={card._id}\n                title={card.title}\n                subTitle={card.subtitle}\n                phone={card.phone}\n                address={`${card.address.city}, ${card.address.street} ${card.address.houseNumber}`}\n                img={card.image && card.image.url}\n                alt={card.image && card.image.alt}\n                like={true}\n                onToggleFavorite={() => handleLikeRemove(card._id)}\n                onDeleteCard={() => handleDeleteCard(card._id)}\n              />\n            </Grid>\n          ))}\n      </Grid>\n\n      <Pagination\n        count={Math.ceil(likedCards.length / itemsPerPage)}\n        page={currentPage}\n        onChange={handlePageChange}\n        color=\"primary\"\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"flex-end\",\n          marginTop: \"20px\",\n          marginBottom: \"20px\",\n        }}\n      />\n    </Container>\n  );\n};\n\nexport default FavoriteCardPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}